<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>QuizLoot</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: #f6f7ff;
  --card: #ffffff;
  --primary: #b6b8ff;
  --secondary: #ffd6e8;
  --accent: #c1f0dc;
  --shadow: 0 10px 30px rgba(0,0,0,.1);
}

* { box-sizing: border-box; font-family: "Segoe UI", system-ui; }

body {
  margin: 0;
  background: linear-gradient(135deg, var(--bg), #fff);
  color: #333;
}

header {
  padding: 16px;
  background: var(--card);
  box-shadow: var(--shadow);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.badge {
  padding: 4px 8px;
  border-radius: 8px;
  font-size: 12px;
  margin-left: 6px;
}

.admin-badge {
  background: linear-gradient(135deg,#7f9cff,#4b5cff);
  color: white;
}

.mod-badge {
  background: linear-gradient(135deg,#ffd700,#ffb700);
  color: #5a3a00;
}

main {
  padding: 16px;
  display: grid;
  gap: 16px;
}

.card {
  background: var(--card);
  border-radius: 16px;
  padding: 16px;
  box-shadow: var(--shadow);
}

button {
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  background: var(--primary);
  color: #333;
  font-weight: 600;
  cursor: pointer;
}

button.secondary { background: var(--secondary); }
button.accent { background: var(--accent); }

input {
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #ddd;
  width: 100%;
}

.hidden { display: none; }

.chat {
  max-height: 200px;
  overflow-y: auto;
  font-size: 14px;
}

.chat p { margin: 4px 0; }

.inventory {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px,1fr));
  gap: 10px;
}

.item {
  background: #fafaff;
  border-radius: 12px;
  padding: 10px;
  text-align: center;
  font-size: 12px;
  box-shadow: var(--shadow);
}
</style>
</head>

<body>

<header>
  <div>
    <strong id="usernameLabel">Guest</strong>
    <span id="adminBadge" class="badge admin-badge hidden">‚óÜ ADMIN</span>
    <span id="modBadge" class="badge mod-badge hidden">‚òÖ MOD</span>
  </div>
  <div>
    üí∞ <span id="coins">0</span> | ‚≠ê <span id="xp">0</span>
  </div>
</header>

<main>

<div class="card" id="loginCard">
  <h2>Login</h2>
  <input id="usernameInput" placeholder="Username">
  <input id="emailInput" placeholder="Email">
  <button onclick="login()">Continue</button>
</div>

<div class="card hidden" id="verifyCard">
  <h2>Two-Step Verification</h2>
  <p>Your code: <strong id="fakeCode"></strong></p>
  <input id="codeInput" placeholder="Enter code">
  <button onclick="verify()">Verify</button>
</div>

<div class="card hidden" id="gameCard">
  <h2 id="question">Question</h2>
  <div id="answers"></div>
</div>

<div class="card hidden">
  <h3>Chat</h3>
  <div class="chat" id="chat"></div>
  <input id="chatInput" placeholder="Say something...">
  <button onclick="sendChat()">Send</button>
</div>

<div class="card hidden">
  <h3>Inventory</h3>
  <div class="inventory" id="inventory"></div>
  <button class="secondary" onclick="openCrate()">Open Crate</button>
</div>

<div class="card hidden" id="adminPanel">
  <h3>Admin Panel</h3>
  <button onclick="toggleAdminBadge()">Toggle Diamond Badge</button>
  <h4>Moderator Permissions</h4>
  <div id="modTable"></div>
</div>

</main>

<script>
/* ================= OWNER SETUP ================= */
const OWNER_USERNAME = "Sprite_Finder";
const OWNER_EMAIL = "joyeeye2025@stmc.ie";
/* ============================================== */

let user = {
  username: "",
  email: "",
  coins: 0,
  xp: 0,
  admin: false,
  mod: false,
  adminBadge: true,
  inventory: [],
  permissions: Array(50).fill(false)
};

let verificationCode = "";

const questions = [
  { q: "2 + 2?", a: ["3","4","5"], c: 1 },
  { q: "Capital of France?", a: ["Paris","Rome","Berlin"], c: 0 }
];

let currentQ = 0;

/* ---------- LOGIN ---------- */
function login() {
  user.username = usernameInput.value;
  user.email = emailInput.value;

  verificationCode = Math.floor(100000 + Math.random()*900000);
  fakeCode.textContent = verificationCode;

  loginCard.classList.add("hidden");
  verifyCard.classList.remove("hidden");
}

function verify() {
  if (codeInput.value == verificationCode) {
    verifyCard.classList.add("hidden");
    startGame();
  }
}

/* ---------- GAME ---------- */
function startGame() {
  usernameLabel.textContent = user.username;

  if (user.username === OWNER_USERNAME && user.email === OWNER_EMAIL) {
    user.admin = true;
    adminPanel.classList.remove("hidden");
    adminBadge.classList.remove("hidden");
  }

  if (user.mod) modBadge.classList.remove("hidden");

  document.querySelectorAll(".card.hidden").forEach(c=>c.classList.remove("hidden"));
  loadQuestion();
  spawnBots();
}

function loadQuestion() {
  const q = questions[currentQ];
  question.textContent = q.q;
  answers.innerHTML = "";
  q.a.forEach((ans,i)=>{
    const b = document.createElement("button");
    b.textContent = ans;
    b.onclick = ()=>answer(i===q.c);
    answers.appendChild(b);
  });
}

function answer(correct) {
  if (correct) {
    user.coins += 10;
    user.xp += 5;
    giveAIReward();
  }
  updateStats();
  currentQ = (currentQ+1)%questions.length;
  loadQuestion();
}

/* ---------- AI REWARDS ---------- */
function giveAIReward() {
  if (Math.random()<0.3) {
    user.inventory.push("üéÅ Crate");
    chatMsg("AI","Nice job! Here's a crate üéÅ‚ú®");
  }
  if (Math.random()<0.2) {
    const code = "QL-"+Math.random().toString(36).slice(2,8).toUpperCase();
    chatMsg("AI","Reward code unlocked: "+code+" üíñ");
  }
}

/* ---------- CHAT ---------- */
function chatMsg(sender,msg) {
  chat.innerHTML += `<p><strong>${sender}:</strong> ${msg}</p>`;
  chat.scrollTop = chat.scrollHeight;
}

function sendChat() {
  const msg = chatInput.value;
  if (!msg) return;
  chatMsg(user.username,msg);
  chatInput.value="";
  setTimeout(()=>botReply(),500+Math.random()*1500);
}

function botReply() {
  const replies = [
    "Nice! üòä",
    "You're doing great üíï",
    "That was tricky üòÖ",
    "I love this game ‚ú®",
    "You're smart! üß†üî•"
  ];
  chatMsg("Bot", replies[Math.floor(Math.random()*replies.length)]);
}

/* ---------- BOTS ---------- */
function spawnBots() {
  setInterval(()=>{
    if (Math.random()<0.4) chatMsg("Bot","Answering... ü§î");
  },3000);
}

/* ---------- INVENTORY ---------- */
function openCrate() {
  user.inventory.push("üê± Cute Character");
  renderInventory();
}

function renderInventory() {
  inventory.innerHTML="";
  user.inventory.forEach(i=>{
    inventory.innerHTML+=`<div class="item">${i}</div>`;
  });
}

/* ---------- ADMIN ---------- */
function toggleAdminBadge() {
  user.adminBadge = !user.adminBadge;
  adminBadge.classList.toggle("hidden",!user.adminBadge);
}

function buildModTable() {
  modTable.innerHTML="";
  user.permissions.forEach((p,i)=>{
    const btn=document.createElement("button");
    btn.textContent=`Perm ${i+1}: ${p?"ON":"OFF"}`;
    btn.onclick=()=>{
      user.permissions[i]=!user.permissions[i];
      buildModTable();
    };
    modTable.appendChild(btn);
  });
}
buildModTable();

/* ---------- STATS ---------- */
function updateStats() {
  coins.textContent = user.coins;
  xp.textContent = user.xp;
}
</script>

</body>
</html>
